<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>MP SHOP POS PRO MAX</title>

<style>
body{
font-family: Arial;
background:#f0f2f5;
margin:0;
}

.header{
background:#2c3e50;
color:white;
padding:15px;
display:flex;
justify-content:space-between;
}

.container{
padding:20px;
}

.card{
background:white;
padding:15px;
margin-bottom:15px;
border-radius:8px;
box-shadow:0 0 5px rgba(0,0,0,0.2);
}

button{
background:#3498db;
color:white;
border:none;
padding:10px;
width:100%;
margin-top:5px;
cursor:pointer;
}

button:hover{
background:#2980b9;
}

input{
width:100%;
padding:8px;
margin-top:5px;
}

.hidden{
display:none;
}

.login-box{
width:300px;
margin:100px auto;
background:white;
padding:20px;
border-radius:10px;
box-shadow:0 0 10px rgba(0,0,0,0.3);
}

.product{
padding:10px;
background:#ecf0f1;
margin:5px;
cursor:pointer;
}

.product:hover{
background:#d0d7de;
}

</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginPage">

<div class="login-box">

<h2>üîê Login POS</h2>

<input id="user" placeholder="Username">
<input id="pass" type="password" placeholder="Password">

<button onclick="login()">Login</button>

</div>

</div>

<!-- POS -->
<div id="posPage" class="hidden">

<div class="header">

<div>üõí MP SHOP POS PRO MAX</div>

<div>
<span id="roleText"></span>
<button onclick="logout()">Logout</button>
</div>

</div>

<div class="container">

<div class="card">

<h3>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</h3>

<input oninput="search(this.value)" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...">

<div id="productList"></div>

</div>

<div class="card">

<h3>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h3>

<div id="cart"></div>

<div id="total">‡∏£‡∏ß‡∏°: 0 ‡∏ö‡∏≤‡∏ó</div>

<button onclick="checkout()">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>

</div>

<div id="adminPanel" class="hidden">

<div class="card">

<h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Admin)</h3>

<input id="pname" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
<input id="pprice" type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">

<button onclick="addProduct()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>

</div>

<div class="card">

<h3>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (Admin)</h3>

<div id="report"></div>

<button onclick="exportExcel()">Export Excel</button>

</div>

</div>

</div>

</div>

<script>

let products =
JSON.parse(localStorage.getItem("products")) ||
[
{name:"‡πÇ‡∏Ñ‡πâ‡∏Å",price:15},
{name:"‡∏ô‡πâ‡∏≥",price:10}
];

let cart=[];
let sales=JSON.parse(localStorage.getItem("sales"))||[];

let role="";

function login(){

let u=document.getElementById("user").value;
let p=document.getElementById("pass").value;

if(u=="admin" && p=="1234"){
role="admin";
}
else if(u=="cashier" && p=="0000"){
role="cashier";
}
else{
alert("‡∏ú‡∏¥‡∏î");
return;
}

document.getElementById("loginPage").classList.add("hidden");
document.getElementById("posPage").classList.remove("hidden");

document.getElementById("roleText").innerText=role;

if(role=="admin"){
document.getElementById("adminPanel").classList.remove("hidden");
}

renderProducts();

}

function logout(){

location.reload();

}

function renderProducts(){

let list=document.getElementById("productList");
list.innerHTML="";

products.forEach(p=>{

let div=document.createElement("div");

div.className="product";

div.innerText=p.name+" - "+p.price+" ‡∏ö‡∏≤‡∏ó";

div.onclick=()=>addCart(p);

list.appendChild(div);

});

}

function search(text){

let filtered=products.filter(p=>p.name.includes(text));

let list=document.getElementById("productList");

list.innerHTML="";

filtered.forEach(p=>{

let div=document.createElement("div");

div.className="product";

div.innerText=p.name+" - "+p.price+" ‡∏ö‡∏≤‡∏ó";

div.onclick=()=>addCart(p);

list.appendChild(div);

});

}

function addCart(p){

cart.push(p);

renderCart();

}

function renderCart(){

let c=document.getElementById("cart");

c.innerHTML="";

let total=0;

cart.forEach((p,i)=>{

total+=p.price;

let div=document.createElement("div");

div.innerText=p.name+" "+p.price;

c.appendChild(div);

});

document.getElementById("total").innerText="‡∏£‡∏ß‡∏°: "+total;

}

function checkout(){

let total=cart.reduce((a,b)=>a+b.price,0);

sales.push(total);

localStorage.setItem("sales",JSON.stringify(sales));

cart=[];

renderCart();

alert("‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß");

renderReport();

}

function addProduct(){

let name=document.getElementById("pname").value;
let price=parseFloat(document.getElementById("pprice").value);

products.push({name,price});

localStorage.setItem("products",JSON.stringify(products));

renderProducts();

}

function renderReport(){

let total=sales.reduce((a,b)=>a+b,0);

document.getElementById("report").innerText=
"‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°: "+total;

}

function exportExcel(){

let csv="‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢\n";

sales.forEach(s=>{
csv+=s+"\n";
});

let blob=new Blob([csv]);

let a=document.createElement("a");

a.href=URL.createObjectURL(blob);

a.download="report.csv";

a.click();

}

</script>

</body>
</html>
