<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MP shop</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #6a0dad, #ffffff);
    margin: 0;
    padding: 20px;
}

.container {
    background: white;
    max-width: 1000px;
    margin: auto;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
}

h1 {
    text-align: center;
    color: #6a0dad;
}

input, select {
    padding: 10px;
    margin: 5px;
    border-radius: 8px;
    border: 1px solid #ccc;
}

button {
    padding: 8px 12px;
    border: none;
    border-radius: 8px;
    background: #6a0dad;
    color: white;
    cursor: pointer;
    font-weight: bold;
}

button:hover {
    background: #4b0082;
}

table {
    width: 100%;
    margin-top: 15px;
    border-collapse: collapse;
}

th {
    background: #6a0dad;
    color: white;
    padding: 10px;
}

td {
    padding: 8px;
    text-align: center;
    border-bottom: 1px solid #ddd;
}

.total {
    font-size: 20px;
    font-weight: bold;
    color: #6a0dad;
    margin-top: 10px;
}

.result {
    margin-top: 10px;
    font-size: 18px;
    font-weight: bold;
}

.clear-btn {
    background: red;
}

.clear-btn:hover {
    background: darkred;
}

.small-btn {
    padding: 4px 8px;
    font-size: 14px;
}

.category-tag {
    padding: 4px 8px;
    border-radius: 6px;
    color: white;
    font-size: 13px;
}

.food { background: #ff9800; }
.drink { background: #2196f3; }
.snack { background: #4caf50; }
.other { background: #9c27b0; }

</style>
</head>

<body>

<div class="container">

<h1>üßæ ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏Ñ‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå (MP shop)</h1>

<input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">

<select id="category">
<option value="food">‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
<option value="drink">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
<option value="snack">‡∏Ç‡∏ô‡∏°</option>
<option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
</select>

<input type="text" id="newCategory" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡πÉ‡∏´‡∏°‡πà">
<button onclick="addCategory()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î</button>

<br>

<input type="number" id="price" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">
<input type="number" id="qty" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô">

<button onclick="addItem()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>

<table id="table">
<tr>
<th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
<th>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
<th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
<th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
<th>‡∏£‡∏ß‡∏°</th>
<th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
</tr>
</table>

<div class="total">
‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="total">0.00</span> ‡∏ö‡∏≤‡∏ó
</div>

<hr>

<input type="number" id="money" placeholder="‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô">

<button onclick="calculateChange()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô</button>
<button onclick="printReceipt()">‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button>
<button class="clear-btn" onclick="clearAll()">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>

<div class="result" id="change"></div>

<div class="result">
‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ: <span id="daily">0.00</span> ‡∏ö‡∏≤‡∏ó
</div>

</div>

<script>

let total = 0;

let dailySales = localStorage.getItem("dailySales") 
? parseFloat(localStorage.getItem("dailySales")) : 0;

document.getElementById("daily").innerText = dailySales.toFixed(2);

function addCategory(){

    let newCat = document.getElementById("newCategory").value;

    if(newCat===""){
        alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î");
        return;
    }

    let select = document.getElementById("category");

    let option = document.createElement("option");

    option.value = newCat;
    option.text = newCat;

    select.add(option);

    document.getElementById("newCategory").value="";

}

function addItem() {

    let name = document.getElementById("name").value;

    let category = document.getElementById("category").value;

    let categoryText = document.getElementById("category").options[
        document.getElementById("category").selectedIndex
    ].text;

    let price = parseFloat(document.getElementById("price").value);

    let qty = parseInt(document.getElementById("qty").value);

    if(name === "" || isNaN(price) || isNaN(qty) || price <= 0 || qty <= 0){
        alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        return;
    }

    let sum = price * qty;

    total += sum;

    let table = document.getElementById("table");

    let row = table.insertRow();

    row.insertCell(0).innerText = name;

    row.insertCell(1).innerHTML =
    `<span class="category-tag ${category}">${categoryText}</span>`;

    row.insertCell(2).innerText = price.toFixed(2);

    let qtyCell = row.insertCell(3);

    qtyCell.innerHTML =
    `<button class="small-btn" onclick="changeQty(this,-1)">-</button>
     ${qty}
     <button class="small-btn" onclick="changeQty(this,1)">+</button>`;

    row.insertCell(4).innerText = sum.toFixed(2);

    row.insertCell(5).innerHTML =
    `<button class="small-btn" onclick="removeRow(this)">‡∏•‡∏ö</button>`;

    updateTotal();

    document.getElementById("name").value="";
    document.getElementById("price").value="";
    document.getElementById("qty").value="";

}

function changeQty(button, change){

    let row = button.parentElement.parentElement;

    let price = parseFloat(row.cells[2].innerText);

    let currentQty =
    parseInt(button.parentElement.childNodes[2].nodeValue.trim());

    let newQty = currentQty + change;

    if(newQty<=0)return;

    button.parentElement.childNodes[2].nodeValue=" "+newQty+" ";

    row.cells[4].innerText = (price*newQty).toFixed(2);

    recalculateTotal();

}

function removeRow(button){

    button.parentElement.parentElement.remove();

    recalculateTotal();

}

function recalculateTotal(){

    total=0;

    let table=document.getElementById("table");

    for(let i=1;i<table.rows.length;i++){

        total+=parseFloat(table.rows[i].cells[4].innerText);

    }

    updateTotal();

}

function updateTotal(){

    document.getElementById("total").innerText=total.toFixed(2);

}

function calculateChange(){

    let money=parseFloat(document.getElementById("money").value);

    if(isNaN(money)){
        alert("‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏á‡∏¥‡∏ô");
        return;
    }

    if(money<total){

        document.getElementById("change").innerText="‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠!";

    }else{

        let change=money-total;

        document.getElementById("change").innerText=
        "‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô: "+change.toFixed(2)+" ‡∏ö‡∏≤‡∏ó";

        dailySales+=total;

        localStorage.setItem("dailySales",dailySales);

        document.getElementById("daily").innerText=dailySales.toFixed(2);

    }

}

function printReceipt(){

    window.print();

}

function clearAll(){

    document.getElementById("table").innerHTML=
    `<tr>
    <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
    <th>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
    <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
    <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
    <th>‡∏£‡∏ß‡∏°</th>
    <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
    </tr>`;

    total=0;

    updateTotal();

    document.getElementById("change").innerText="";

}

</script>

</body>
</html>
