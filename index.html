<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>MP SHOP POS PRO MAX</title>

<style>

body{
font-family:Arial;
background:#f0f2f5;
margin:0;
}

/* HEADER */
.header{
background:#2c3e50;
color:white;
padding:15px;
display:flex;
justify-content:space-between;
align-items:center;
box-shadow:0 3px 10px rgba(0,0,0,0.2);
}

/* CONTAINER */
.container{
padding:20px;
}

/* CARD */
.card{
background:white;
padding:15px;
margin-bottom:15px;
border-radius:10px;
box-shadow:0 4px 12px rgba(0,0,0,0.15);
}

/* BUTTON */
button{
background:#3498db;
color:white;
border:none;
padding:10px;
width:100%;
margin-top:5px;
cursor:pointer;
border-radius:6px;
font-weight:bold;
transition:0.2s;
}

button:hover{
background:#2980b9;
transform:scale(1.02);
}

/* DELETE BUTTON */
.deleteBtn{
background:#e74c3c;
width:auto;
padding:5px 10px;
margin-left:10px;
}

.deleteBtn:hover{
background:#c0392b;
}

/* CLEAR BUTTON */
.clearBtn{
background:#e67e22;
}

.clearBtn:hover{
background:#d35400;
}

/* INPUT */
input{
width:100%;
padding:8px;
margin-top:5px;
border-radius:5px;
border:1px solid #ccc;
}

/* LOGIN */
.login-box{
width:300px;
margin:100px auto;
background:white;
padding:20px;
border-radius:10px;
box-shadow:0 0 10px rgba(0,0,0,0.3);
}

/* PRODUCT */
.product{
padding:10px;
background:#ecf0f1;
margin:5px;
cursor:pointer;
border-radius:5px;
transition:0.2s;
}

.product:hover{
background:#d0d7de;
transform:scale(1.02);
}

/* CART ITEM */
.cartItem{
display:flex;
justify-content:space-between;
align-items:center;
background:#f9f9f9;
padding:8px;
margin:5px;
border-radius:5px;
}

/* QR */
.qrBox{
text-align:center;
}

.qrBox img{
width:250px;
margin-top:10px;
}

.payTotal{
font-size:20px;
margin:10px;
color:#e74c3c;
font-weight:bold;
}

.role{
margin-right:10px;
font-weight:bold;
}

.hidden{
display:none;
}

</style>

</head>
<body>

<!-- LOGIN PAGE -->
<div id="loginPage">

<div class="login-box">

<h2>üîê Login POS</h2>

<input id="user" placeholder="Username">
<input id="pass" type="password" placeholder="Password">

<button onclick="login()">Login</button>

</div>

</div>


<!-- POS PAGE -->
<div id="posPage" class="hidden">

<div class="header">

<div>üõí MP SHOP POS PRO MAX</div>

<div>
<span id="roleText" class="role"></span>
<button onclick="logout()">Logout</button>
</div>

</div>


<div class="container">

<!-- SEARCH -->
<div class="card">

<h3>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</h3>

<input oninput="search(this.value)" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...">

<div id="productList"></div>

</div>


<!-- CART -->
<div class="card">

<h3>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h3>

<div id="cart"></div>

<div id="total">‡∏£‡∏ß‡∏°: 0 ‡∏ö‡∏≤‡∏ó</div>

<button onclick="showQR()">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>

<button class="clearBtn" onclick="clearCart()">üóëÔ∏è ‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>

</div>


<!-- QR -->
<div id="qrCard" class="card hidden">

<div class="qrBox">

<h3>üì± ‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>

<img src="./promptpay.jpg">

<div id="qrTotal" class="payTotal"></div>

<button onclick="confirmPayment()">‚úî ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</button>

<button onclick="cancelPayment()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>

</div>

</div>


<!-- ADMIN PANEL -->
<div id="adminPanel" class="hidden">

<div class="card">

<h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Admin)</h3>

<input id="pname" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
<input id="pprice" type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">

<button onclick="addProduct()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>

</div>


<div class="card">

<h3>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h3>

<div id="report"></div>

<button onclick="exportExcel()">Export Excel</button>

</div>

</div>

</div>

</div>


<script>

/* LOGIN SECURITY */

const ADMIN_USER="admin";
const ADMIN_PASS="****";

const CASHIER_USER="cashier";
const CASHIER_PASS="****";


/* DATABASE */

let products=
JSON.parse(localStorage.getItem("products")) ||
[
{name:"‡πÇ‡∏Ñ‡πâ‡∏Å",price:15},
{name:"‡∏ô‡πâ‡∏≥",price:10}
];

let cartData=[];

let sales=
JSON.parse(localStorage.getItem("sales"))||[];

let role="";


/* LOGIN */

function login(){

let u=document.getElementById("user").value;
let p=document.getElementById("pass").value;

if(u===ADMIN_USER && p===ADMIN_PASS){
role="admin";
}
else if(u===CASHIER_USER && p===CASHIER_PASS){
role="cashier";
}
else{
alert("‚ùå Username ‡∏´‡∏£‡∏∑‡∏≠ Password ‡∏ú‡∏¥‡∏î");
return;
}

loginPage.classList.add("hidden");
posPage.classList.remove("hidden");

roleText.innerText="üë§ "+role;

if(role==="admin"){
adminPanel.classList.remove("hidden");
}

renderProducts();
renderCart();
renderReport();

}


/* LOGOUT */

function logout(){
location.reload();
}


/* PRODUCTS */

function renderProducts(){

let list=document.getElementById("productList");

list.innerHTML="";

products.forEach(p=>{

let div=document.createElement("div");

div.className="product";

div.innerText=p.name+" - "+p.price+" ‡∏ö‡∏≤‡∏ó";

div.onclick=()=>addCart(p);

list.appendChild(div);

});

}


function search(text){

let list=document.getElementById("productList");

list.innerHTML="";

products
.filter(p=>p.name.includes(text))
.forEach(p=>{

let div=document.createElement("div");

div.className="product";

div.innerText=p.name+" - "+p.price+" ‡∏ö‡∏≤‡∏ó";

div.onclick=()=>addCart(p);

list.appendChild(div);

});

}


/* CART */

function addCart(p){

cartData.push(p);

renderCart();

}


function renderCart(){

let cart=document.getElementById("cart");

cart.innerHTML="";

let total=0;

cartData.forEach((p,index)=>{

total+=p.price;

let div=document.createElement("div");

div.className="cartItem";

div.innerHTML=
`
<span>${p.name} ${p.price} ‡∏ö‡∏≤‡∏ó</span>
<button class="deleteBtn" onclick="removeItem(${index})">‡∏•‡∏ö</button>
`;

cart.appendChild(div);

});

total.innerText="‡∏£‡∏ß‡∏°: "+total+" ‡∏ö‡∏≤‡∏ó";

document.getElementById("total").innerText=
"‡∏£‡∏ß‡∏°: "+total+" ‡∏ö‡∏≤‡∏ó";

}


/* REMOVE ITEM */

function removeItem(index){

cartData.splice(index,1);

renderCart();

}


/* CLEAR CART */

function clearCart(){

cartData=[];

renderCart();

}


/* PAYMENT */

function showQR(){

let total=cartData.reduce((a,b)=>a+b.price,0);

if(total===0){
alert("‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤");
return;
}

qrCard.classList.remove("hidden");

qrTotal.innerText="‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞: "+total+" ‡∏ö‡∏≤‡∏ó";

}


function confirmPayment(){

let total=cartData.reduce((a,b)=>a+b.price,0);

sales.push(total);

localStorage.setItem("sales",JSON.stringify(sales));

cartData=[];

renderCart();

qrCard.classList.add("hidden");

alert("‚úÖ ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");

renderReport();

}


function cancelPayment(){

qrCard.classList.add("hidden");

}


/* ADMIN */

function addProduct(){

let name=pname.value;

let price=parseFloat(pprice.value);

if(!name || !price){
alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
return;
}

products.push({name,price});

localStorage.setItem("products",JSON.stringify(products));

renderProducts();

alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß");

}


/* REPORT */

function renderReport(){

let total=sales.reduce((a,b)=>a+b,0);

report.innerText="‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°: "+total+" ‡∏ö‡∏≤‡∏ó";

}


/* EXPORT */

function exportExcel(){

let csv="‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢\n";

sales.forEach(s=>csv+=s+"\n");

let blob=new Blob([csv]);

let a=document.createElement("a");

a.href=URL.createObjectURL(blob);

a.download="report.csv";

a.click();

}

</script>

</body>
</html>
